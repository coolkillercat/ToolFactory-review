<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>alert_management_alerts API Documentation</title>
</head>
<body>
<hr />
<p>stage: Monitor
group: Respond
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments</p>
<hr />
<h1>Alert Management alerts API</h1>
<p>DETAILS:
<strong>Tier:</strong> Free, Premium, Ultimate
<strong>Offering:</strong> GitLab.com, Self-managed, GitLab Dedicated</p>
<p>The Alert Management alerts API is limited to metric images. For more API endpoints, see the
<a href="graphql/reference/index.md#alertmanagementalert">GraphQL API</a>.</p>
<h2>Upload metric image</h2>
<p><code>plaintext
POST /projects/:id/alert_management_alerts/:alert_iid/metric_images</code></p>
<p>| Attribute   | Type    | Required | Description                          |
|-------------|---------|----------|--------------------------------------|
| <code>id</code>        | integer/string | yes      | The ID or <a href="rest/index.md#namespaced-path-encoding">URL-encoded path of the project</a> owned by the authenticated user. |
| <code>alert_iid</code> | integer | yes      | The internal ID of a project's alert. |</p>
<p><code>shell
curl --request POST --header "PRIVATE-TOKEN: &lt;your_access_token&gt;"  --form 'file=@/path/to/file.png' \
--form 'url=http://example.com' --form 'url_text=Example website' "https://gitlab.example.com/api/v4/projects/5/alert_management_alerts/93/metric_images"</code></p>
<p>Example response:</p>
<p><code>json
{
    "id": 17,
    "created_at": "2020-11-12T20:07:58.156Z",
    "filename": "sample_2054",
    "file_path": "/uploads/-/system/alert_metric_image/file/17/sample_2054.png",
    "url": "https://example.com/metric",
    "url_text": "An example metric"
}</code></p>
<h2>List metric images</h2>
<p><code>plaintext
GET /projects/:id/alert_management_alerts/:alert_iid/metric_images</code></p>
<p>| Attribute   | Type    | Required | Description                          |
|-------------|---------|----------|--------------------------------------|
| <code>id</code>        | integer/string | yes      | The ID or <a href="rest/index.md#namespaced-path-encoding">URL-encoded path of the project</a> owned by the authenticated user. |
| <code>alert_iid</code> | integer | yes      | The internal ID of a project's alert. |</p>
<p><code>shell
curl --header "PRIVATE-TOKEN: &lt;your_access_token&gt;" "https://gitlab.example.com/api/v4/projects/5/alert_management_alerts/93/metric_images"</code></p>
<p>Example response:</p>
<p><code>json
[
    {
        "id": 17,
        "created_at": "2020-11-12T20:07:58.156Z",
        "filename": "sample_2054",
        "file_path": "/uploads/-/system/alert_metric_image/file/17/sample_2054.png",
        "url": "https://example.com/metric",
        "url_text": "An example metric"
    },
    {
        "id": 18,
        "created_at": "2020-11-12T20:14:26.441Z",
        "filename": "sample_2054",
        "file_path": "/uploads/-/system/alert_metric_image/file/18/sample_2054.png",
        "url": "https://example.com/metric",
        "url_text": "An example metric"
    }
]</code></p>
<h2>Update metric image</h2>
<p><code>plaintext
PUT /projects/:id/alert_management_alerts/:alert_iid/metric_images/:image_id</code></p>
<p>| Attribute   | Type    | Required | Description                          |
|-------------|---------|----------|--------------------------------------|
| <code>id</code>        | integer/string | yes      | The ID or <a href="rest/index.md#namespaced-path-encoding">URL-encoded path of the project</a> owned by the authenticated user. |
| <code>alert_iid</code> | integer | yes      | The internal ID of a project's alert. |
| <code>image_id</code> | integer | yes      | The ID of the image. |
| <code>url</code> | string | no      | The URL to view more metrics information. |
| <code>url_text</code> | string | no      | A description of the image or URL. |</p>
<p><code>shell
curl --header "PRIVATE-TOKEN: &lt;your_access_token&gt;" --request PUT  --form 'url=http://example.com' --form 'url_text=Example website' "https://gitlab.example.com/api/v4/projects/5/alert_management_alerts/93/metric_images/1"</code></p>
<p>Example response:</p>
<p><code>json
{
    "id": 23,
    "created_at": "2020-11-13T00:06:18.084Z",
    "filename": "file.png",
    "file_path": "/uploads/-/system/alert_metric_image/file/23/file.png",
    "url": "https://example.com/metric",
    "url_text": "An example metric"
}</code></p>
<h2>Delete metric image</h2>
<p><code>plaintext
DELETE /projects/:id/alert_management_alerts/:alert_iid/metric_images/:image_id</code></p>
<p>| Attribute   | Type    | Required | Description                          |
|-------------|---------|----------|--------------------------------------|
| <code>id</code>        | integer/string | yes      | The ID or <a href="rest/index.md#namespaced-path-encoding">URL-encoded path of the project</a> owned by the authenticated user. |
| <code>alert_iid</code> | integer | yes      | The internal ID of a project's alert. |
| <code>image_id</code> | integer | yes      | The ID of the image. |</p>
<p><code>shell
curl --header "PRIVATE-TOKEN: &lt;your_access_token&gt;" --request DELETE "https://gitlab.example.com/api/v4/projects/5/alert_management_alerts/93/metric_images/1"</code></p>
<p>Can return the following status codes:</p>
<ul>
<li><code>204 No Content</code>: if the image was deleted successfully.</li>
<li><code>422 Unprocessable</code>: if the image could not be deleted.</li>
</ul>
</body>
</html>