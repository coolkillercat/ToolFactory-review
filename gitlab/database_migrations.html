<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>database_migrations API Documentation</title>
</head>
<body>
<hr />
<p>stage: Data Stores
group: Database
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments</p>
<hr />
<h1>Database migrations API</h1>
<p>DETAILS:
<strong>Tier:</strong> Free, Premium, Ultimate
<strong>Offering:</strong> Self-managed</p>
<blockquote>
<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab/-/merge_requests/123408">Introduced</a> in GitLab 16.2.</li>
</ul>
</blockquote>
<p>This API is for managing database migrations used in the development of GitLab.</p>
<p>All methods require administrator authorization.</p>
<h2>Mark a migration as successful</h2>
<p>Mark pending migrations as successfully executed to prevent them from being
executed by the <code>db:migrate</code> tasks. Use this API to skip failing
migrations after they are determined to be safe to skip.</p>
<p><code>plaintext
POST /api/v4/admin/migrations/:version/mark</code></p>
<p>| Attribute       | Type           | Required | Description                                                                                                                                                                                      |
|-----------------|----------------|----------|----------------------------------------------------------------------------------|
| <code>version</code>       | integer        | yes      | Version timestamp of the migration to be skipped                                 |
| <code>database</code>      | string         | no       | The database name for which the migration is skipped. Defaults to <code>main</code>.        |</p>
<p><code>shell
curl --header "PRIVATE-TOKEN: &lt;your_access_token&gt;" \
   --url "https://gitlab.example.com/api/v4/admin/migrations/:version/mark"</code></p>
</body>
</html>