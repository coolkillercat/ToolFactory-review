<!DOCTYPE html>
<html>
<head>
	<title>API - TETR.IO</title>
	<link rel="stylesheet" type="text/css" href="/about/style.css">
	<meta charset="utf-8">

	<!-- Matomo -->
	<script type="text/javascript">
	  var _paq = window._paq || [];
	  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	  const uid = localStorage.getItem('moonKagariUsername') || localStorage.getItem('lastUsername');
	  if (uid && (uid !== 'X-ANON')) {
	  	_paq.push(['setUserId', uid]);
	  }
	  _paq.push(['trackPageView']);
	  _paq.push(['enableLinkTracking']);
	  (function() {
	    var u="//moon.kagari.moe/";
	    _paq.push(['setTrackerUrl', u+'matomo.php']);
	    _paq.push(['setSiteId', '3']);
	    _paq.push(['enableHeartBeatTimer']);
	    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	  })();
	</script>
	<!-- End Matomo Code -->

	<style>
		.dangerdanger {
			background: repeating-linear-gradient(-45deg, #960E0E, #960E0E 10px, #750A0A 10px, #750A0A 20px);
			text-align: center !important;
			color: #FFF;
			font-size: 1.1em;
		}
		.warnwarn {
			background: repeating-linear-gradient(-45deg, #96580E, #96580E 10px, #75490A 10px, #75490A 20px);
			text-align: center !important;
			color: #FFF;
		}

		.vl h1, .vl h2, .vl h3 {
			margin: 0;
		}
		.vl p {
			margin: 0;
		}

		.typetag {
			display: inline-block;
			padding: 0.1em 0.3em;
			border-radius: 3px;
			box-shadow: 0px 2px 4px #0006;
			background-color: #7782B1;
		}
		.typetag ~ span {
			color: #7782B1;
		}

		.vl li b + span {
			color: #7782B1;
		}
		.vl li b + span + span {
			color: #F31E55;
			font-weight: 900;
		}

		code {
			font-family: 'PFW';
		}

		.warning {
			background-color: #2A1B16;
			color: #FFA904;
			border-radius: 3px;
			padding: 0.5em 1em;
		}

		.hint {
			background-color: #162A1C;
			color: #04FF5D;
			border-radius: 3px;
			padding: 0.5em 1em;
		}
	</style>
</head>
<body>
	<header>
		<a class="major_item pi_play" href="https://tetr.io/">PLAY</a>
		<a class="major_item pi_ch" href="https://ch.tetr.io/">TETRA CHANNEL</a>
		<a class="major_item pi_about active" href="https://tetr.io/about/">ABOUT</a>

		<a class="major_item_r" target="_blank" title="Support TETR.IO or gift supporter status and get cool benefits!" href="https://l.tetr.io/support">ǹ</a>
		<a class="major_item_r" target="_blank" title="View the TETR.IO issue tracker - report bugs and pitch ideas to improve TETR.IO" href="https://github.com/tetrio/issues">Ǻ</a>
		<a class="major_item_r" target="_blank" title="Join the TETR.IO Discord - follow updates, give feedback and have fun" href="https://l.tetr.io/discord">ǻ</a>
		<a class="major_item_r" target="_blank" title="Follow TETR.IO on Twitter - be the first to hear about updates" href="https://twitter.com/tetriogame">Ǽ</a>
		<a class="major_item_r" target="_blank" title="Get TETR.IO Desktop" href="/about/desktop">Ǿ</a>
	</header>
	<img id="major_logo" src="/res/logo.png" />

	<div class="panel">
		<a href="../"><div id="back">BACK</div></a>
		<h1>TETRA CHANNEL REST API</h1>
		<table>
			<tr>
				<td>This document outlines the way developers may read player and system data for TETR.IO. This data may be accessed through the API for TETRA CHANNEL.</td>
			</tr>
			<tr>
				<td class="dangerdanger">This document <b>only</b> describes the TETRA CHANNEL API (at <code>https://ch.tetr.io/api/</code>), not the main game API (at <code>https://tetr.io/api/</code>). Usage of the main game API is <b>NOT ALLOWED</b> without explicit, written consent. <b>Unauthorized usage of the main game API may result in permanent suspension of your account.</b></td>
			</tr>
			<tr>
				<td class="warnwarn">TETR.IO is in <b>alpha</b>. The API may change without notice between updates. While I hope to keep reverse compatibility as much as possible, things may change every now and then!</td>
			</tr>
			<tr>
				<td>Usage of the TETRA CHANNEL API does not require an account or bot account. Please do note that requests are logged. Some simple rules:
					<ul>
						<li><b>Do not flood the API with requests.</b> This should be obvious, but just to be sure. Please keep the amount of requests at a moderate rate - once a second should be fine for most cases, short bursts are OK. Please consider other users!</li>
						<li><b>Honor caching data.</b> If a response indicates its cache will expire after 10 minutes, please do not rerequest the data during that time, as the data should not change in that time, assuming you are sending an <code>X-Session-ID</code> header.</li>
						<li><b>Send an <code>X-Session-ID</code> header</b> if you are often rerequesting the same datasets. This not only assures the data you receive is consistent, it also helps reduce database calls on our side.</li>
						<li><b>Don't use a <code>X-Session-ID</code> header for requests that are not related.</b> That way, load balancing can function as expected.</li>
						<li><b>Do not use the API in ways that break the TETR.IO <a href="https://tetr.io/about/terms/">Terms of Service.</a></b> Should be obvious.</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl">
					<h2>Table of Contents</h2>
					<ul>
						<li><b><a class="link" href="#endpoints">Endpoints</a></b></li>
						<li><b><a class="link" href="#reference">Reference</a></b></li>
					</ul>
				</td>
			</tr>
		</table>
	</div>

	<div class="panel">
		<h1 id="endpoints">ENDPOINTS</h1>
		<table>
			<tr>
				<td class="long vl">
					<p>All endpoints are available at <code>https://ch.tetr.io/api/</code>.</p>
					<ul>
						<li><b>General</b> <span>(/general/)</span>
							<ul>
								<li><b><a class="link" href="#generalstats">Server Statistics</a></b> <span>(/general/stats)</span></li>
								<li><b><a class="link" href="#generalactivity">Server Activity</a></b> <span>(/general/activity)</span></li>
							</ul>
						</li>
						<li><b>Users</b> <span>(/users/)</span>
							<ul>
								<li><b><a class="link" href="#usersuser">User Info</a></b> <span>(/users/:user)</span></li>
								<li><b><a class="link" href="#usersuserrecords">User Records</a></b> <span>(/users/:user/records)</span></li>
								<li><b><a class="link" href="#userssearchquery">User Search</a></b> <span>(/users/search/:query)</span></li>
								<li><b>User Lists</b> <span>(/users/lists/)</span><ul>
									<li><b><a class="link" href="#userlistsleague">TETRA LEAGUE Leaderboard</a></b> <span>(/users/lists/league)</span></li>
									<li><b><a class="link" href="#userlistsleagueall">TETRA LEAGUE Leaderboard (full export)</a></b> <span>(/users/lists/league/all)</span></li>
									<li><b><a class="link" href="#userlistsxp">XP Leaderboard</a></b> <span>(/users/lists/xp)</span></li>
								</ul></li>
							</ul>
						</li>
						<li><b>Streams</b> <span>(/streams/)</span>
							<ul>
								<li><b><a class="link" href="#streamsstream">Get Stream</a></b> <span>(/streams/:stream)</span></li>
							</ul>
						</li>
						<li><b>TETRA NEWS</b> <span>(/news/)</span>
							<ul>
								<li><b><a class="link" href="#newsall">All Latest News</a></b> <span>(/news/)</span></li>
								<li><b><a class="link" href="#newsstream">Latest News</a></b> <span>(/news/:stream)</span></li>
							</ul>
						</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="generalstats">
					<h1>Server Statistics</h1>
					<h3><span class="typetag get">GET</span> /general/stats</h3>
					<p>Cache time: <b>60 seconds</b></p>
					<br>
					<h3>Parameters</h3>
					<p>None</p>
					<br>
					<h3>Query string parameters</h3>
					<p>None</p>
					<br>
					<h3>Return data</h3>
					<p>Some statistics about the service.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>usercount</b> <span>(int)</span> &mdash; The amount of users on the server, including anonymous accounts.</li>
							<li><b>usercount_delta</b> <span>(float)</span> &mdash; The amount of users created a second (through the last minute).</li>
							<li><b>anoncount</b> <span>(int)</span> &mdash; The amount of anonymous accounts on the server.</li>
							<li><b>totalaccounts</b> <span>(int)</span> &mdash; The total amount of accounts ever created (including pruned anons etc.).</li>
							<li><b>rankedcount</b> <span>(int)</span> &mdash; The amount of ranked (visible in TETRA LEAGUE leaderboard) accounts on the server.</li>
							<li><b>replaycount</b> <span>(int)</span> &mdash; The amount of replays stored on the server.</li>
							<li><b>gamesplayed</b> <span>(int)</span> &mdash; The amount of games played across all users, including both off- and online modes.</li>
							<li><b>gamesplayed_delta</b> <span>(float)</span> &mdash; The amount of games played a second (through the last minute).</li>
							<li><b>gamesfinished</b> <span>(int)</span> &mdash; The amount of games played across all users, including both off- and online modes, excluding games that were not completed (e.g. retries)</li>
							<li><b>gametime</b> <span>(float)</span> &mdash; The amount of seconds spent playing across all users, including both off- and online modes.</li>
							<li><b>inputs</b> <span>(int)</span> &mdash; The amount of keys pressed across all users, including both off- and online modes.</li>
							<li><b>piecesplaced</b> <span>(int)</span> &mdash; The amount of pieces placed across all users, including both off- and online modes.</li>
						</ul></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="generalactivity">
					<h1>Server Activity</h1>
					<h3><span class="typetag get">GET</span> /general/activity</h3>
					<p>Cache time: <b>10 minutes</b></p>
					<br>
					<h3>Parameters</h3>
					<p>None</p>
					<br>
					<h3>Query string parameters</h3>
					<p>None</p>
					<br>
					<h3>Return data</h3>
					<p>A graph of user activity over the last 2 days. A user is seen as active if they logged in or received XP within the last 30 minutes.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>activity</b> <span>(int[])</span> &mdash; An array of plot points, newest points first.</li>
						</ul></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="usersuser">
					<h1>User Info</h1>
					<h3><span class="typetag get">GET</span> /users/<span>:user</span></h3>
					<p>Cache time: <b>5 minutes</b></p>
					<br>
					<h3>Parameters</h3>
					<ul>
						<li><b>:user</b> <span>(string or MongoID)</span> <span>required</span> &mdash; The lowercase username or user ID to look up.</li>
					</ul>
					<br>
					<h3>Query string parameters</h3>
					<p>None</p>
					<br>
					<h3>Return data</h3>
					<p>An object describing the user in detail.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>user</b> <span>(object)</span> &mdash; The requested user:<ul>
								<li><b>_id</b> <span>(string)</span> &mdash; The user's internal ID.</li>
								<li><b>username</b> <span>(string)</span> &mdash; The user's username.</li>
								<li><b>role</b> <span>(string)</span> &mdash; The user's role (one of "anon", "user", "bot", "halfmod", "mod", "admin", "sysop", "banned").</li>
								<li><b>ts</b>? <span>(string)</span> &mdash; When the user account was created. If not set, this account was created before join dates were recorded.</li>
								<li><b>botmaster</b>? <span>(string)</span> &mdash; If this user is a bot, the bot's operator.</li>
								<li><b>badges</b> <span>(object[])</span> &mdash; The user's badges:<ul>
									<li><b>id</b> <span>(string)</span> &mdash; The badge's internal ID, and the filename of the badge icon (all PNGs within <code>/res/badges/</code>)</li>
									<li><b>label</b> <span>(string)</span> &mdash; The badge's label, shown when hovered.</li>
									<li><b>ts</b>? <span>(string)</span> &mdash; The badge's timestamp, if shown.</li>
								</ul></li>
								<li><b>xp</b> <span>(float)</span> &mdash; The user's XP in points.</li>
								<li><b>gamesplayed</b> <span>(int)</span> &mdash; The amount of online games played by this user. If the user has chosen to hide this statistic, it will be -1.</li>
								<li><b>gameswon</b> <span>(int)</span> &mdash; The amount of online games won by this user. If the user has chosen to hide this statistic, it will be -1.</li>
								<li><b>gametime</b> <span>(float)</span> &mdash; The amount of seconds this user spent playing, both on- and offline. If the user has chosen to hide this statistic, it will be -1.</li>
								<li><b>country</b> <span>(string?)</span> &mdash; The user's ISO 3166-1 country code, or null if hidden/unknown. Some vanity flags exist.</li>
								<li><b>badstanding</b>? <span>(bool)</span> &mdash; Whether this user currently has a bad standing (recently banned).</li>
								<li><b>supporter</b> <span>(bool)</span> &mdash; Whether this user is currently supporting TETR.IO &lt;3</li>
								<li><b>supporter_tier</b> <span>(int)</span> &mdash; An indicator of their total amount supported, between 0 and 4 inclusive.</li>
								<li><b>verified</b> <span>(bool)</span> &mdash; Whether this user is a verified account.</li>
								<li><b>league</b> <span>(object)</span> &mdash; This user's current TETRA LEAGUE standing:<ul>
									<li><b>gamesplayed</b> <span>(int)</span> &mdash; The amount of TETRA LEAGUE games played by this user.</li>
									<li><b>gameswon</b> <span>(int)</span> &mdash; The amount of TETRA LEAGUE games won by this user.</li>
									<li><b>rating</b> <span>(float)</span> &mdash; This user's TR (Tetra Rating), or -1 if less than 10 games were played.</li>
									<li><b>rank</b> <span>(string)</span> &mdash; This user's letter rank. Z is unranked.</li>
									<li><b>bestrank</b> <span>(string)</span> &mdash; This user's highest achieved rank this season.</li>
									<li><b>standing</b> <span>(int)</span> &mdash; This user's position in global leaderboards, or -1 if not applicable.</li>
									<li><b>standing_local</b> <span>(int)</span> &mdash; This user's position in local leaderboards, or -1 if not applicable.</li>
									<li><b>next_rank</b> <span>(string?)</span> &mdash; The next rank this user can achieve, if they win more games, or null if unranked (or the best rank).</li>
									<li><b>prev_rank</b> <span>(string?)</span> &mdash; The previous rank this user can achieve, if they lose more games, or null if unranked (or the worst rank).</li>
									<li><b>next_at</b> <span>(int)</span> &mdash; The position of the best player in the user's current rank, surpass them to go up a rank. -1 if unranked (or the best rank).</li>
									<li><b>prev_at</b> <span>(int)</span> &mdash; The position of the worst player in the user's current rank, dip below them to go down a rank. -1 if unranked (or the worst rank).</li>
									<li><b>percentile</b> <span>(float)</span> &mdash; This user's percentile position (0 is best, 1 is worst).</li>
									<li><b>percentile_rank</b> <span>(string)</span> &mdash; This user's percentile rank, or Z if not applicable.</li>
									<li><b>glicko</b>? <span>(float)</span> &mdash; This user's Glicko-2 rating.</li>
									<li><b>rd</b>? <span>(float)</span> &mdash; This user's Glicko-2 Rating Deviation. If over 100, this user is unranked.</li>
									<li><b>apm</b>? <span>(float)</span> &mdash; This user's average APM (attack per minute) over the last 10 games.</li>
									<li><b>pps</b>? <span>(float)</span> &mdash; This user's average PPS (pieces per second) over the last 10 games.</li>
									<li><b>vs</b>? <span>(float)</span> &mdash; This user's average VS (versus score) over the last 10 games.</li>
									<li><b>decaying</b> <span>(bool)</span> &mdash; Whether this user's RD is rising (has not played in the last week).</li>
								</ul></li>
								<li><b>avatar_revision</b>? <span>(int)</span> &mdash; This user's avatar ID. Get their avatar at <code>https://tetr.io/user-content/avatars/{ USERID }.jpg?rv={ AVATAR_REVISION }</code></li>
								<li><b>banner_revision</b>? <span>(int)</span> &mdash; This user's banner ID. Get their banner at <code>https://tetr.io/user-content/banners/{ USERID }.jpg?rv={ BANNER_REVISION }</code>. Ignore this field if the user is not a supporter.</li>
								<li><b>bio</b>? <span>(string)</span> &mdash; This user's "About Me" section. Ignore this field if the user is not a supporter.</li>
								<li><b>connections</b> <span>(object)</span> &mdash; This user's third party connections:<ul>
									<li><b>discord</b>? <span>(object)</span> &mdash; This user's connection to Discord:<ul>
										<li><b>id</b> <span>(string)</span> &mdash; This user's Discord ID.</li>
										<li><b>username</b> <span>(string)</span> &mdash; This user's Discord Tag.</li>
									</ul></li>
								</ul></li>
								<li><b>friend_count</b> <span>(int)</span> &mdash; The amount of players who have added this user to their friends list.</li>
								<li><b>distinguishment</b>? <span>(object)</span> &mdash; This user's distinguishment banner, if any. Must at least have:<ul>
									<li><b>type</b> <span>(string)</span> &mdash; The type of distinguishment banner.</li>
								</ul></li>
							</ul></li>
						</ul></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="usersuserrecords">
					<h1>User Records</h1>
					<h3><span class="typetag get">GET</span> /users/<span>:user</span>/records</h3>
					<p>Cache time: <b>15 minutes</b></p>
					<br>
					<h3>Parameters</h3>
					<ul>
						<li><b>:user</b> <span>(string or MongoID)</span> <span>required</span> &mdash; The lowercase username or user ID to look up.</li>
					</ul>
					<br>
					<h3>Query string parameters</h3>
					<p>None</p>
					<br>
					<h3>Return data</h3>
					<p>An object describing the user's single player records.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>records</b> <span>(object)</span> &mdash; The requested user's ranked records:<ul>
								<li><b>40l</b> <span>(object)</span> &mdash; The user's 40 LINES record:<ul>
									<li><b>record</b> <span>(object?)</span> &mdash; The user's 40 LINES <a class="link" href="#recorddata">record data</a>, or null if never played.</li>
									<li><b>rank</b> <span>(int?)</span> &mdash; The user's rank in global leaderboards, or null if not in global leaderboards.</li>
								</ul></li>
								<li><b>blitz</b> <span>(object)</span> &mdash; The user's BLITZ record:<ul>
									<li><b>record</b> <span>(object?)</span> &mdash; The user's BLITZ <a class="link" href="#recorddata">record data</a>, or null if never played.</li>
									<li><b>rank</b> <span>(int?)</span> &mdash; The user's rank in global BLITZ leaderboards, or null if not in global leaderboards.</li>
								</ul></li>
							</ul></li>
							<li><b>zen</b> <span>(object)</span> &mdash; The user's ZEN record:<ul>
								<li><b>level</b> <span>(int)</span> &mdash; The user's level in ZEN mode.</li>
								<li><b>score</b> <span>(int)</span> &mdash; The user's score in ZEN mode.</li>
							</ul></li>
						</ul></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="userssearchquery">
					<h1>User Search</h1>
					<h3><span class="typetag get">GET</span> /users/search/<span>:query</span></h3>
					<p>Cache time: <b>5 minutes</b></p>
					<br>
					<h3>Parameters</h3>
					<ul>
						<li><b>:query</b> <span>(string)</span> <span>required</span> &mdash; The Discord ID (snowflake) to look up.</li>
					</ul>
					<br>
					<h3>Query string parameters</h3>
					<p>None</p>
					<br>
					<h3>Return data</h3>
					<p>An object describing the user found, or null if none found.</p>
					<div class="warning">▲ Only one user is returned. Generally, you won't see two users with the same Discord ID linked, though, as it would be against TETR.IO multiaccounting policies.</div>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>user</b> <span>(object?)</span> &mdash; The requested user:<ul>
								<li><b>_id</b> <span>(string)</span> &mdash; The user's internal ID.</li>
								<li><b>username</b> <span>(string)</span> &mdash; The user's username.</li>
							</ul></li>
						</ul></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="userlistsleague">
					<h1>TETRA LEAGUE Leaderboard</h1>
					<h3><span class="typetag get">GET</span> /users/lists/league</h3>
					<p>Cache time: <b>10 minutes</b></p>
					<br>
					<h3>Parameters</h3>
					<p>None</p>
					<br>
					<h3>Query string parameters</h3>
					<ul>
						<li><b>after</b>? <span>(float)</span> &mdash; The upper bound in TR. Use this to paginate downwards: take the lowest seen TR and pass that back through this field to continue scrolling. 25000 by default.</li>
						<li><b>before</b>? <span>(float)</span> &mdash; The lower bound in TR. Use this to paginate upwards: take the highest seen TR and pass that back through this field to continue scrolling. If set, the search order is reversed (returning the lowest items that match the query)</li>
						<li><b>limit</b>? <span>(int)</span> &mdash; The amount of entries to return, between 1 and 100. 50 by default.</li>
						<li><b>country</b>? <span>(string)</span> &mdash; The ISO 3166-1 country code to filter to. Leave unset to not filter by country.</li>
					</ul>
					<div class="warning">▲ The <code>before</code> and <code>after</code> parameters may not be combined.</div>
					<br>
					<h3>Return data</h3>
					<p>An array of users fulfilling the search criteria.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>users</b> <span>(object[])</span> &mdash; The matched users:<ul>
								<li><b>_id</b> <span>(string)</span> &mdash; The user's internal ID.</li>
								<li><b>username</b> <span>(string)</span> &mdash; The user's username.</li>
								<li><b>role</b> <span>(string)</span> &mdash; The user's role (one of "anon", "user", "bot", "halfmod", "mod", "admin", "sysop").</li>
								<li><b>xp</b> <span>(float)</span> &mdash; The user's XP in points.</li>
								<li><b>country</b> <span>(string?)</span> &mdash; The user's ISO 3166-1 country code, or null if hidden/unknown. Some vanity flags exist.</li>
								<li><b>supporter</b> <span>(bool)</span> &mdash; Whether this user is currently supporting TETR.IO &lt;3</li>
								<li><b>verified</b> <span>(bool)</span> &mdash; Whether this user is a verified account.</li>
								<li><b>league</b> <span>(object)</span> &mdash; This user's current TETRA LEAGUE standing:<ul>
									<li><b>gamesplayed</b> <span>(int)</span> &mdash; The amount of TETRA LEAGUE games played by this user.</li>
									<li><b>gameswon</b> <span>(int)</span> &mdash; The amount of TETRA LEAGUE games won by this user.</li>
									<li><b>rating</b> <span>(float)</span> &mdash; This user's TR (Tetra Rating), or -1 if less than 10 games were played.</li>
									<li><b>rank</b> <span>(string)</span> &mdash; This user's letter rank. Z is unranked.</li>
									<li><b>bestrank</b> <span>(string)</span> &mdash; This user's highest achieved rank this season.</li>
									<li><b>glicko</b>? <span>(float)</span> &mdash; This user's Glicko-2 rating.</li>
									<li><b>rd</b>? <span>(float)</span> &mdash; This user's Glicko-2 Rating Deviation. If over 100, this user is unranked.</li>
									<li><b>apm</b>? <span>(float)</span> &mdash; This user's average APM (attack per minute) over the last 10 games.</li>
									<li><b>pps</b>? <span>(float)</span> &mdash; This user's average PPS (pieces per second) over the last 10 games.</li>
									<li><b>vs</b>? <span>(float)</span> &mdash; This user's average VS (versus score) over the last 10 games.</li>
									<li><b>decaying</b> <span>(bool)</span> &mdash; Whether this user's RD is rising (has not played in the last week).</li>
								</ul></li>
							</ul></li>
						</ul></li>
					</ul>
					<div class="hint">● Want to paginate over this data? Remember to pass an <code>X-Session-ID</code> header to ensure data consistency.</div>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="userlistsleagueall">
					<h1>TETRA LEAGUE Leaderboard (full export)</h1>
					<h3><span class="typetag get">GET</span> /users/lists/league/all</h3>
					<p>Cache time: <b>1 hour</b></p>
					<br>
					<h3>Parameters</h3>
					<p>None</p>
					<br>
					<h3>Query string parameters</h3>
					<ul>
						<li><b>country</b>? <span>(string)</span> &mdash; The ISO 3166-1 country code to filter to. Leave unset to not filter by country.</li>
					</ul>
					<br>
					<h3>Return data</h3>
					<p>An array of all users fulfilling the search criteria. Please do not overuse this.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>users</b> <span>(object[])</span> &mdash; The matched users:<ul>
								<li><b>_id</b> <span>(string)</span> &mdash; The user's internal ID.</li>
								<li><b>username</b> <span>(string)</span> &mdash; The user's username.</li>
								<li><b>role</b> <span>(string)</span> &mdash; The user's role (one of "anon", "user", "bot", "halfmod", "mod", "admin", "sysop").</li>
								<li><b>xp</b> <span>(float)</span> &mdash; The user's XP in points.</li>
								<li><b>country</b> <span>(string?)</span> &mdash; The user's ISO 3166-1 country code, or null if hidden/unknown. Some vanity flags exist.</li>
								<li><b>supporter</b> <span>(bool)</span> &mdash; Whether this user is currently supporting TETR.IO &lt;3</li>
								<li><b>verified</b> <span>(bool)</span> &mdash; Whether this user is a verified account.</li>
								<li><b>league</b> <span>(object)</span> &mdash; This user's current TETRA LEAGUE standing:<ul>
									<li><b>gamesplayed</b> <span>(int)</span> &mdash; The amount of TETRA LEAGUE games played by this user.</li>
									<li><b>gameswon</b> <span>(int)</span> &mdash; The amount of TETRA LEAGUE games won by this user.</li>
									<li><b>rating</b> <span>(float)</span> &mdash; This user's TR (Tetra Rating), or -1 if less than 10 games were played.</li>
									<li><b>rank</b> <span>(string)</span> &mdash; This user's letter rank. Z is unranked.</li>
									<li><b>bestrank</b> <span>(string)</span> &mdash; This user's highest achieved rank this season.</li>
									<li><b>glicko</b>? <span>(float)</span> &mdash; This user's Glicko-2 rating.</li>
									<li><b>rd</b>? <span>(float)</span> &mdash; This user's Glicko-2 Rating Deviation. If over 100, this user is unranked.</li>
									<li><b>apm</b>? <span>(float)</span> &mdash; This user's average APM (attack per minute) over the last 10 games.</li>
									<li><b>pps</b>? <span>(float)</span> &mdash; This user's average PPS (pieces per second) over the last 10 games.</li>
									<li><b>vs</b>? <span>(float)</span> &mdash; This user's average VS (versus score) over the last 10 games.</li>
									<li><b>decaying</b> <span>(bool)</span> &mdash; Whether this user's RD is rising (has not played in the last week).</li>
								</ul></li>
							</ul></li>
						</ul></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="userlistsxp">
					<h1>XP Leaderboard</h1>
					<h3><span class="typetag get">GET</span> /users/lists/xp</h3>
					<p>Cache time: <b>10 minutes</b></p>
					<br>
					<h3>Parameters</h3>
					<p>None</p>
					<br>
					<h3>Query string parameters</h3>
					<ul>
						<li><b>after</b>? <span>(float)</span> &mdash; The upper bound in XP. Use this to paginate downwards: take the lowest seen XP and pass that back through this field to continue scrolling. Infinite by default.</li>
						<li><b>before</b>? <span>(float)</span> &mdash; The lower bound in XP. Use this to paginate upwards: take the highest seen XP and pass that back through this field to continue scrolling. If set, the search order is reversed (returning the lowest items that match the query)</li>
						<li><b>limit</b>? <span>(int)</span> &mdash; The amount of entries to return, between 1 and 100. 50 by default.</li>
						<li><b>country</b>? <span>(string)</span> &mdash; The ISO 3166-1 country code to filter to. Leave unset to not filter by country.</li>
					</ul>
					<div class="warning">▲ The <code>before</code> and <code>after</code> parameters may not be combined.</div>
					<br>
					<h3>Return data</h3>
					<p>An array of users fulfilling the search criteria.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>users</b> <span>(object[])</span> &mdash; The matched users:<ul>
								<li><b>_id</b> <span>(string)</span> &mdash; The user's internal ID.</li>
								<li><b>username</b> <span>(string)</span> &mdash; The user's username.</li>
								<li><b>role</b> <span>(string)</span> &mdash; The user's role (one of "anon", "user", "bot", "halfmod", "mod", "admin", "sysop").</li>
								<li><b>ts</b>? <span>(string)</span> &mdash; When the user account was created. If not set, this account was created before join dates were recorded.</li>
								<li><b>country</b> <span>(string?)</span> &mdash; The user's ISO 3166-1 country code, or null if hidden/unknown. Some vanity flags exist.</li>
								<li><b>supporter</b> <span>(bool)</span> &mdash; Whether this user is currently supporting TETR.IO &lt;3</li>
								<li><b>verified</b> <span>(bool)</span> &mdash; Whether this user is a verified account.</li>
								<li><b>xp</b> <span>(float)</span> &mdash; The user's XP in points.</li>
								<li><b>gamesplayed</b> <span>(int)</span> &mdash; The amount of online games played by this user. If the user has chosen to hide this statistic, it will be -1.</li>
								<li><b>gameswon</b> <span>(int)</span> &mdash; The amount of online games won by this user. If the user has chosen to hide this statistic, it will be -1.</li>
								<li><b>gametime</b> <span>(float)</span> &mdash; The amount of seconds this user spent playing, both on- and offline. If the user has chosen to hide this statistic, it will be -1.</li>
							</ul></li>
						</ul></li>
					</ul>
					<div class="hint">● Want to paginate over this data? Remember to pass an <code>X-Session-ID</code> header to ensure data consistency.</div>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="streamsstream">
					<h1>Get Stream</h1>
					<h3><span class="typetag get">GET</span> /streams/<span>:stream</span></h3>
					<p>Cache time: <b>1 minute</b></p>
					<br>
					<h3>Parameters</h3>
					<ul>
						<li><b>:stream</b> <span>(string)</span> <span>required</span> &mdash; The <a class="link" href="#streamid">stream ID</a> to look up.</li>
					</ul>
					<br>
					<h3>Query string parameters</h3>
					<p>None</p>
					<br>
					<h3>Return data</h3>
					<p>The records in this Stream. A Stream is a list of records with a set length. Replays that are not featured in any Stream are automatically pruned.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>records</b> <span>(object[])</span> &mdash; The <a class="link" href="#recorddata">records</a> in this Stream.</li>
						</ul></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="newsall">
					<h1>All Latest News</h1>
					<h3><span class="typetag get">GET</span> /news/</h3>
					<p>Cache time: <b>1 second</b></p>
					<br>
					<h3>Parameters</h3>
					<ul>
						<li><b>limit</b>? <span>(int)</span> &mdash; The amount of entries to return, between 1 and 100. 25 by default.</li>
					</ul>
					<br>
					<h3>Query string parameters</h3>
					<p>None</p>
					<br>
					<h3>Return data</h3>
					<p>The latest news items in any stream.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>news</b> <span>(object[])</span> &mdash; The latest news items:<ul>
								<li><b>_id</b> <span>(string)</span> &mdash; The item's internal ID.</li>
								<li><b>stream</b> <span>(string)</span> &mdash; The item's stream.</li>
								<li><b>type</b> <span>(string)</span> &mdash; The item's type.</li>
								<li><b>data</b> <span>(object)</span> &mdash; The item's <a class="link" href="#newsdata">records</a>.</li>
								<li><b>ts</b> <span>(string)</span> &mdash; The item's creation date.</li>
							</ul></li>
						</ul></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="newsstream">
					<h1>Latest News</h1>
					<h3><span class="typetag get">GET</span> /news/<span>:stream</span></h3>
					<p>Cache time: <b>1 minute</b></p>
					<br>
					<h3>Parameters</h3>
					<ul>
						<li><b>:stream</b> <span>(string)</span> <span>required</span> &mdash; The news stream to look up (either "global" or "user_{ userID }").</li>
						<li><b>limit</b>? <span>(int)</span> &mdash; The amount of entries to return, between 1 and 100. 25 by default.</li>
					</ul>
					<br>
					<h3>Query string parameters</h3>
					<p>None</p>
					<br>
					<h3>Return data</h3>
					<p>The latest news items in the stream. Use stream "global" for the global news.</p>
					<ul>
						<li><b>success</b> <span>(bool)</span> &mdash; Whether the request was successful.</li>
						<li><b>error</b>? <span>(string)</span> &mdash; If unsuccessful, the reason the request failed.</li>
						<li><b>cache</b>? <span>(object)</span> &mdash; If successful, <a class="link" href="#cachedata">data about how this request was cached</a>.</li>
						<li><b>data</b>? <span>(object)</span> &mdash; If successful, the requested data:<ul>
							<li><b>news</b> <span>(object[])</span> &mdash; The latest news items:<ul>
								<li><b>_id</b> <span>(string)</span> &mdash; The item's internal ID.</li>
								<li><b>stream</b> <span>(string)</span> &mdash; The item's stream.</li>
								<li><b>type</b> <span>(string)</span> &mdash; The item's type.</li>
								<li><b>data</b> <span>(object)</span> &mdash; The item's <a class="link" href="#newsdata">records</a>.</li>
								<li><b>ts</b> <span>(string)</span> &mdash; The item's creation date.</li>
							</ul></li>
						</ul></li>
					</ul>
				</td>
			</tr>
		</table>
	</div>
	<div class="panel">
		<h1 id="reference">REFERENCE</h1>
		<table>
			<tr>
				<td class="long vl">
					<ul>
						<li><b><a class="link" href="#cachedata">Cache Data Structure</a></b></li>
						<li><b><a class="link" href="#recorddata">Record Data Structure</a></b></li>
						<li><b><a class="link" href="#streamid">Stream IDs</a></b></li>
						<li><b><a class="link" href="#newsdata">News Data Structure</a></b></li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="cachedata">
					<h1>Cache Data Structure</h1>
					<p>All responses from the TETRA CHANNEL API are cached. With every response, a <code>cache</code> object is made available to view the status of the cache:</p>
					<ul>
						<li><b>status</b> <span>(string)</span> &mdash; Whether the cache was hit. Either "hit", "miss", or "awaited" (resource was already being requested by another client)</li>
						<li><b>cached_at</b> <span>(int)</span> &mdash; When this resource was cached.</li>
						<li><b>cached_until</b> <span>(int)</span> &mdash; When this resource's cache expires.</li>
					</ul>
					<div class="warning">▲ Cache is not shared between workers. Load balancing may therefore give you unexpected responses. To use the same worker, pass the same <code>X-Session-ID</code> header for all requests that should use the same cache.</div>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="recorddata">
					<h1>Record Data Structure</h1>
					<p>Single player records are saved into Record objects, retrievable through the <a class="link" href="#streamsstream">Get Stream</a> and <a class="link" href="#usersuserrecords">User Records</a> methods. While these may change in structure drastically, the most important parts of their structure is outlined below:</p>
					<div class="warning">▲ This may change any time.</div>
					<ul>
						<li><b>_id</b> <span>(string)</span> &mdash; The Record's ID. This is NOT the replay ID.</li>
						<li><b>stream</b> <span>(string)</span> &mdash; The Stream this Record belongs to.</li>
						<li><b>replayid</b> <span>(string)</span> &mdash; The ID of the associated replay.</li>
						<li><b>user</b> <span>(object)</span> &mdash; The user who set this Record:<ul>
							<li><b>_id</b> <span>(string)</span> &mdash; The user's internal ID.</li>
							<li><b>username</b> <span>(string)</span> &mdash; The user's username.</li>
						</ul></li>
						<li><b>ts</b> <span>(string)</span> &mdash; The time this record was set.</li>
						<li><b>ismulti</b>? <span>(bool)</span> &mdash; If true, this is a multiplayer replay.</li>
						<li><b>endcontext</b> <span>(object, or object[] in case of multiplayer replays)</span> &mdash; The state this replay finished with.</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="streamid">
					<h1>Stream IDs</h1>
					<p>Stream IDs may be broken up into two or three parts, delimited by underscores:</p>
					<ul>
						<li>the <b>type</b> &mdash; The type of Stream. Currently "40l", "blitz", or "any".</li>
						<li>the <b>context</b> &mdash; The context of this Stream. Currently "global", "userbest", or "userrecent".</li>
						<li>the <b>identifier</b> &mdash; If applicable, additional data. For example, in the case of "userbest" or "userrecent", the user ID.</li>
					</ul>
					<p>Some examples:</p>
					<ul>
						<li><b>40l_global</b> &mdash; the global 40 LINES Stream</li>
						<li><b>blitz_global</b> &mdash; the global BLITZ Stream</li>
						<li><b>league_userrecent_5e32fc85ab319c2ab1beb07c</b> &mdash; user 5e32fc85ab319c2ab1beb07c's latest TETRA LEAGUE matches Stream</li>
						<li><b>40l_userbest_5e32fc85ab319c2ab1beb07c</b> &mdash; user 5e32fc85ab319c2ab1beb07c's best 40 LINES records Stream</li>
						<li><b>blitz_userbest_5e32fc85ab319c2ab1beb07c</b> &mdash; user 5e32fc85ab319c2ab1beb07c's best BLITZ records Stream</li>
						<li><b>any_userrecent_5e32fc85ab319c2ab1beb07c</b> &mdash; user 5e32fc85ab319c2ab1beb07c's recent mixed records Stream</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="long vl" id="newsdata">
					<h1>News Data Structure</h1>
					<p>News data may be stored in different formats depending on the type of news item. Here's all the types with their data structures.</p>
					<div class="warning">▲ New news types may be added at any moment.</div>
					<h2>leaderboard</h2>
					<p>When a user's new personal best enters a global leaderboard. Seen in the global stream only.</p>
					<ul>
						<li><b>username</b> <span>(string)</span> &mdash; The username of the person who got the leaderboard spot.</li>
						<li><b>gametype</b> <span>(string)</span> &mdash; The game mode played.</li>
						<li><b>rank</b> <span>(int)</span> &mdash; The global rank achieved.</li>
						<li><b>result</b> <span>(float)</span> &mdash; The result (score or time) achieved.</li>
						<li><b>replayid</b> <span>(string)</span> &mdash; The replay's shortID.</li>
					</ul>
					<h2>personalbest</h2>
					<p>When a user gets a personal best. Seen in user streams only.</p>
					<ul>
						<li><b>username</b> <span>(string)</span> &mdash; The username of the player.</li>
						<li><b>gametype</b> <span>(string)</span> &mdash; The game mode played.</li>
						<li><b>result</b> <span>(float)</span> &mdash; The result (score or time) achieved.</li>
						<li><b>replayid</b> <span>(string)</span> &mdash; The replay's shortID.</li>
					</ul>
					<h2>badge</h2>
					<p>When a user gets a badge. Seen in user streams only.</p>
					<ul>
						<li><b>username</b> <span>(string)</span> &mdash; The username of the player.</li>
						<li><b>type</b> <span>(string)</span> &mdash; The badge's internal ID, and the filename of the badge icon (all PNGs within <code>/res/badges/</code>)</li>
						<li><b>label</b> <span>(string)</span> &mdash; The badge's label.</li>
					</ul>
					<h2>rankup</h2>
					<p>When a user gets a new top rank in TETRA LEAGUE. Seen in user streams only.</p>
					<ul>
						<li><b>username</b> <span>(string)</span> &mdash; The username of the player.</li>
						<li><b>rank</b> <span>(string)</span> &mdash; The new rank.</li>
					</ul>
					<h2>supporter</h2>
					<p>When a user gets TETR.IO Supporter. Seen in user streams only.</p>
					<ul>
						<li><b>username</b> <span>(string)</span> &mdash; The username of the player.</li>
					</ul>
					<h2>supporter_gift</h2>
					<p>When a user is gifted TETR.IO Supporter. Seen in user streams only.</p>
					<ul>
						<li><b>username</b> <span>(string)</span> &mdash; The username of the recipient.</li>
					</ul>
				</td>
			</tr>
		</table>
	</div>
</body>
</html>